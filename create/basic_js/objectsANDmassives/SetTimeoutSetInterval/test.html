<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>

    var arr = [10, 12, 15, 21];

    // for (var i = 0; i < arr.length; i++) {
    //     setTimeout((function (id) {
    //         console.log('z Index: ' + i + ', element: ' + arr[i]);
    //     })(i), 3000);
    // }
    //

    // var arr1 = [10, 12, 15, 21];
    // for (i = 0; i < arr1.length; i++) {
    //
    //     setTimeout((function () {
    //         console.log('Index: ' + i + ', element: ' + arr1[i]);
    //     }).apply(arr1), 3000);
    // }
    //
    //  WORKS
    var arr2 = [10, 12, 15, 21];/////??????как сделать чрез замыкание?????

    for (var i = 0; i < arr2.length; i++) {
        var callbackWithClosure = (function () {
            var i_in_closure = i;
            return function () {
                console.log('Index: ' + i_in_closure + ', element: ' + arr2[i_in_closure]);
            };
        })();
        setTimeout(callbackWithClosure, 3000);

    }

//     for (var i = 0; i < arr2.length; i++) {
//         var callbackWithClosure = function () {
//             var i_in_closure = i;
//             console.log('Index: ' + i_in_closure + ', element: ' + arr2[i_in_closure]);
//         };
//         setTimeout(callbackWithClosure, 3000);
//
//     }
//
// ///////////////////////////
//
    for (var i = 0; i < arr.length; i++) {
        var functionCallback = (function (id) {
            console.log('XX Index: ' + i + ', element: ' + arr[i]);
        })(i);
        setTimeout(functionCallback, 3000);
    }
//
////     // BAD

    //     //const arr = [10, 12, 15, 21];
//     // for (var i = 0; i < arr.length; i++) {
//     //     setTimeout(function() {
//     //         console.log('Index: ' + i + ', element: ' + arr[i]);
//     //     }, 3000);
    // }
</script>
</body>
</html>